"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./middleware.ts":
/*!***********************!*\
  !*** ./middleware.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/esm/api/server.js\");\n\n// Список публичных маршрутов, которые доступны без авторизации\nconst publicRoutes = [\n    '/',\n    '/login',\n    '/register',\n    '/admin/login'\n];\nfunction middleware(request) {\n    const token = request.cookies.get('access_token');\n    const { pathname } = request.nextUrl;\n    // Если маршрут публичный, пропускаем\n    if (publicRoutes.includes(pathname)) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // Если нет токена и маршрут не публичный, перенаправляем на страницу входа\n    if (!token && !publicRoutes.includes(pathname)) {\n        const url = new URL('/login', request.url);\n        url.searchParams.set('from', pathname);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(url);\n    }\n    // Если есть токен, добавляем его в заголовки для API запросов\n    const requestHeaders = new Headers(request.headers);\n    if (token) {\n        requestHeaders.set('Authorization', `Bearer ${token.value}`);\n    }\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next({\n        request: {\n            headers: requestHeaders\n        }\n    });\n}\n// Указываем, для каких маршрутов применять middleware\nconst config = {\n    matcher: [\n        /*\r\n     * Match all request paths except for the ones starting with:\r\n     * - api (API routes)\r\n     * - _next/static (static files)\r\n     * - _next/image (image optimization files)\r\n     * - favicon.ico (favicon file)\r\n     * - public folder\r\n     */ '/((?!api|_next/static|_next/image|favicon.ico|public).*)'\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMEM7QUFHMUMsK0RBQStEO0FBQy9ELE1BQU1DLGVBQWU7SUFBQztJQUFLO0lBQVU7SUFBYTtDQUFlO0FBRTFELFNBQVNDLFdBQVdDLE9BQW9CO0lBQzdDLE1BQU1DLFFBQVFELFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0lBQ2xDLE1BQU0sRUFBRUMsUUFBUSxFQUFFLEdBQUdKLFFBQVFLLE9BQU87SUFFcEMscUNBQXFDO0lBQ3JDLElBQUlQLGFBQWFRLFFBQVEsQ0FBQ0YsV0FBVztRQUNuQyxPQUFPUCxxREFBWUEsQ0FBQ1UsSUFBSTtJQUMxQjtJQUVBLDJFQUEyRTtJQUMzRSxJQUFJLENBQUNOLFNBQVMsQ0FBQ0gsYUFBYVEsUUFBUSxDQUFDRixXQUFXO1FBQzlDLE1BQU1JLE1BQU0sSUFBSUMsSUFBSSxVQUFVVCxRQUFRUSxHQUFHO1FBQ3pDQSxJQUFJRSxZQUFZLENBQUNDLEdBQUcsQ0FBQyxRQUFRUDtRQUM3QixPQUFPUCxxREFBWUEsQ0FBQ2UsUUFBUSxDQUFDSjtJQUMvQjtJQUVBLDhEQUE4RDtJQUM5RCxNQUFNSyxpQkFBaUIsSUFBSUMsUUFBUWQsUUFBUWUsT0FBTztJQUNsRCxJQUFJZCxPQUFPO1FBQ1RZLGVBQWVGLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLEVBQUVWLE1BQU1lLEtBQUssRUFBRTtJQUM3RDtJQUVBLE9BQU9uQixxREFBWUEsQ0FBQ1UsSUFBSSxDQUFDO1FBQ3ZCUCxTQUFTO1lBQ1BlLFNBQVNGO1FBQ1g7SUFDRjtBQUNGO0FBRUEsc0RBQXNEO0FBQy9DLE1BQU1JLFNBQVM7SUFDcEJDLFNBQVM7UUFDUDs7Ozs7OztLQU9DLEdBQ0Q7S0FDRDtBQUNILEVBQUMiLCJzb3VyY2VzIjpbIi9hcHAvbWlkZGxld2FyZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcclxuaW1wb3J0IHR5cGUgeyBOZXh0UmVxdWVzdCB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5cclxuLy8g0KHQv9C40YHQvtC6INC/0YPQsdC70LjRh9C90YvRhSDQvNCw0YDRiNGA0YPRgtC+0LIsINC60L7RgtC+0YDRi9C1INC00L7RgdGC0YPQv9C90Ysg0LHQtdC3INCw0LLRgtC+0YDQuNC30LDRhtC40LhcclxuY29uc3QgcHVibGljUm91dGVzID0gWycvJywgJy9sb2dpbicsICcvcmVnaXN0ZXInLCAnL2FkbWluL2xvZ2luJ11cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtaWRkbGV3YXJlKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgY29uc3QgdG9rZW4gPSByZXF1ZXN0LmNvb2tpZXMuZ2V0KCdhY2Nlc3NfdG9rZW4nKVxyXG4gIGNvbnN0IHsgcGF0aG5hbWUgfSA9IHJlcXVlc3QubmV4dFVybFxyXG5cclxuICAvLyDQldGB0LvQuCDQvNCw0YDRiNGA0YPRgiDQv9GD0LHQu9C40YfQvdGL0LksINC/0YDQvtC/0YPRgdC60LDQtdC8XHJcbiAgaWYgKHB1YmxpY1JvdXRlcy5pbmNsdWRlcyhwYXRobmFtZSkpIHtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCgpXHJcbiAgfVxyXG5cclxuICAvLyDQldGB0LvQuCDQvdC10YIg0YLQvtC60LXQvdCwINC4INC80LDRgNGI0YDRg9GCINC90LUg0L/Rg9Cx0LvQuNGH0L3Ri9C5LCDQv9C10YDQtdC90LDQv9GA0LDQstC70Y/QtdC8INC90LAg0YHRgtGA0LDQvdC40YbRgyDQstGF0L7QtNCwXHJcbiAgaWYgKCF0b2tlbiAmJiAhcHVibGljUm91dGVzLmluY2x1ZGVzKHBhdGhuYW1lKSkge1xyXG4gICAgY29uc3QgdXJsID0gbmV3IFVSTCgnL2xvZ2luJywgcmVxdWVzdC51cmwpXHJcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnZnJvbScsIHBhdGhuYW1lKVxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdCh1cmwpXHJcbiAgfVxyXG5cclxuICAvLyDQldGB0LvQuCDQtdGB0YLRjCDRgtC+0LrQtdC9LCDQtNC+0LHQsNCy0LvRj9C10Lwg0LXQs9C+INCyINC30LDQs9C+0LvQvtCy0LrQuCDQtNC70Y8gQVBJINC30LDQv9GA0L7RgdC+0LJcclxuICBjb25zdCByZXF1ZXN0SGVhZGVycyA9IG5ldyBIZWFkZXJzKHJlcXVlc3QuaGVhZGVycylcclxuICBpZiAodG9rZW4pIHtcclxuICAgIHJlcXVlc3RIZWFkZXJzLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHt0b2tlbi52YWx1ZX1gKVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KHtcclxuICAgIHJlcXVlc3Q6IHtcclxuICAgICAgaGVhZGVyczogcmVxdWVzdEhlYWRlcnMsXHJcbiAgICB9LFxyXG4gIH0pXHJcbn1cclxuXHJcbi8vINCj0LrQsNC30YvQstCw0LXQvCwg0LTQu9GPINC60LDQutC40YUg0LzQsNGA0YjRgNGD0YLQvtCyINC/0YDQuNC80LXQvdGP0YLRjCBtaWRkbGV3YXJlXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgbWF0Y2hlcjogW1xyXG4gICAgLypcclxuICAgICAqIE1hdGNoIGFsbCByZXF1ZXN0IHBhdGhzIGV4Y2VwdCBmb3IgdGhlIG9uZXMgc3RhcnRpbmcgd2l0aDpcclxuICAgICAqIC0gYXBpIChBUEkgcm91dGVzKVxyXG4gICAgICogLSBfbmV4dC9zdGF0aWMgKHN0YXRpYyBmaWxlcylcclxuICAgICAqIC0gX25leHQvaW1hZ2UgKGltYWdlIG9wdGltaXphdGlvbiBmaWxlcylcclxuICAgICAqIC0gZmF2aWNvbi5pY28gKGZhdmljb24gZmlsZSlcclxuICAgICAqIC0gcHVibGljIGZvbGRlclxyXG4gICAgICovXHJcbiAgICAnLygoPyFhcGl8X25leHQvc3RhdGljfF9uZXh0L2ltYWdlfGZhdmljb24uaWNvfHB1YmxpYykuKiknLFxyXG4gIF0sXHJcbn0gIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInB1YmxpY1JvdXRlcyIsIm1pZGRsZXdhcmUiLCJyZXF1ZXN0IiwidG9rZW4iLCJjb29raWVzIiwiZ2V0IiwicGF0aG5hbWUiLCJuZXh0VXJsIiwiaW5jbHVkZXMiLCJuZXh0IiwidXJsIiwiVVJMIiwic2VhcmNoUGFyYW1zIiwic2V0IiwicmVkaXJlY3QiLCJyZXF1ZXN0SGVhZGVycyIsIkhlYWRlcnMiLCJoZWFkZXJzIiwidmFsdWUiLCJjb25maWciLCJtYXRjaGVyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(middleware)/./middleware.ts\n");

/***/ })

});