"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./middleware.ts":
/*!***********************!*\
  !*** ./middleware.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/esm/api/server.js\");\n\n// Список публичных маршрутов, которые доступны без авторизации\nconst publicRoutes = [\n    '/',\n    '/register',\n    '/admin/login'\n];\nfunction middleware(request) {\n    const token = request.cookies.get('access_token');\n    const { pathname } = request.nextUrl;\n    // Если маршрут публичный, пропускаем\n    if (publicRoutes.includes(pathname)) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // Если нет токена и маршрут не публичный, перенаправляем на страницу входа\n    if (!token && !publicRoutes.includes(pathname)) {\n        const url = new URL('/', request.url);\n        url.searchParams.set('from', pathname);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(url);\n    }\n    // Если есть токен, добавляем его в заголовки для API запросов\n    const requestHeaders = new Headers(request.headers);\n    if (token) {\n        requestHeaders.set('Authorization', `Bearer ${token.value}`);\n    }\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next({\n        request: {\n            headers: requestHeaders\n        }\n    });\n}\n// Указываем, для каких маршрутов применять middleware\nconst config = {\n    matcher: [\n        /*\r\n     * Match all request paths except for the ones starting with:\r\n     * - api (API routes)\r\n     * - _next/static (static files)\r\n     * - _next/image (image optimization files)\r\n     * - favicon.ico (favicon file)\r\n     * - public folder\r\n     */ '/((?!api|_next/static|_next/image|favicon.ico|public).*)'\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMEM7QUFHMUMsK0RBQStEO0FBQy9ELE1BQU1DLGVBQWU7SUFBQztJQUFLO0lBQWE7Q0FBZTtBQUVoRCxTQUFTQyxXQUFXQyxPQUFvQjtJQUM3QyxNQUFNQyxRQUFRRCxRQUFRRSxPQUFPLENBQUNDLEdBQUcsQ0FBQztJQUNsQyxNQUFNLEVBQUVDLFFBQVEsRUFBRSxHQUFHSixRQUFRSyxPQUFPO0lBRXBDLHFDQUFxQztJQUNyQyxJQUFJUCxhQUFhUSxRQUFRLENBQUNGLFdBQVc7UUFDbkMsT0FBT1AscURBQVlBLENBQUNVLElBQUk7SUFDMUI7SUFFQSwyRUFBMkU7SUFDM0UsSUFBSSxDQUFDTixTQUFTLENBQUNILGFBQWFRLFFBQVEsQ0FBQ0YsV0FBVztRQUM5QyxNQUFNSSxNQUFNLElBQUlDLElBQUksS0FBS1QsUUFBUVEsR0FBRztRQUNwQ0EsSUFBSUUsWUFBWSxDQUFDQyxHQUFHLENBQUMsUUFBUVA7UUFDN0IsT0FBT1AscURBQVlBLENBQUNlLFFBQVEsQ0FBQ0o7SUFDL0I7SUFFQSw4REFBOEQ7SUFDOUQsTUFBTUssaUJBQWlCLElBQUlDLFFBQVFkLFFBQVFlLE9BQU87SUFDbEQsSUFBSWQsT0FBTztRQUNUWSxlQUFlRixHQUFHLENBQUMsaUJBQWlCLENBQUMsT0FBTyxFQUFFVixNQUFNZSxLQUFLLEVBQUU7SUFDN0Q7SUFFQSxPQUFPbkIscURBQVlBLENBQUNVLElBQUksQ0FBQztRQUN2QlAsU0FBUztZQUNQZSxTQUFTRjtRQUNYO0lBQ0Y7QUFDRjtBQUVBLHNEQUFzRDtBQUMvQyxNQUFNSSxTQUFTO0lBQ3BCQyxTQUFTO1FBQ1A7Ozs7Ozs7S0FPQyxHQUNEO0tBQ0Q7QUFDSCxFQUFDIiwic291cmNlcyI6WyIvYXBwL21pZGRsZXdhcmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXHJcbmltcG9ydCB0eXBlIHsgTmV4dFJlcXVlc3QgfSBmcm9tICduZXh0L3NlcnZlcidcclxuXHJcbi8vINCh0L/QuNGB0L7QuiDQv9GD0LHQu9C40YfQvdGL0YUg0LzQsNGA0YjRgNGD0YLQvtCyLCDQutC+0YLQvtGA0YvQtSDQtNC+0YHRgtGD0L/QvdGLINCx0LXQtyDQsNCy0YLQvtGA0LjQt9Cw0YbQuNC4XHJcbmNvbnN0IHB1YmxpY1JvdXRlcyA9IFsnLycsICcvcmVnaXN0ZXInLCAnL2FkbWluL2xvZ2luJ11cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtaWRkbGV3YXJlKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgY29uc3QgdG9rZW4gPSByZXF1ZXN0LmNvb2tpZXMuZ2V0KCdhY2Nlc3NfdG9rZW4nKVxyXG4gIGNvbnN0IHsgcGF0aG5hbWUgfSA9IHJlcXVlc3QubmV4dFVybFxyXG5cclxuICAvLyDQldGB0LvQuCDQvNCw0YDRiNGA0YPRgiDQv9GD0LHQu9C40YfQvdGL0LksINC/0YDQvtC/0YPRgdC60LDQtdC8XHJcbiAgaWYgKHB1YmxpY1JvdXRlcy5pbmNsdWRlcyhwYXRobmFtZSkpIHtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCgpXHJcbiAgfVxyXG5cclxuICAvLyDQldGB0LvQuCDQvdC10YIg0YLQvtC60LXQvdCwINC4INC80LDRgNGI0YDRg9GCINC90LUg0L/Rg9Cx0LvQuNGH0L3Ri9C5LCDQv9C10YDQtdC90LDQv9GA0LDQstC70Y/QtdC8INC90LAg0YHRgtGA0LDQvdC40YbRgyDQstGF0L7QtNCwXHJcbiAgaWYgKCF0b2tlbiAmJiAhcHVibGljUm91dGVzLmluY2x1ZGVzKHBhdGhuYW1lKSkge1xyXG4gICAgY29uc3QgdXJsID0gbmV3IFVSTCgnLycsIHJlcXVlc3QudXJsKVxyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2Zyb20nLCBwYXRobmFtZSlcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QodXJsKVxyXG4gIH1cclxuXHJcbiAgLy8g0JXRgdC70Lgg0LXRgdGC0Ywg0YLQvtC60LXQvSwg0LTQvtCx0LDQstC70Y/QtdC8INC10LPQviDQsiDQt9Cw0LPQvtC70L7QstC60Lgg0LTQu9GPIEFQSSDQt9Cw0L/RgNC+0YHQvtCyXHJcbiAgY29uc3QgcmVxdWVzdEhlYWRlcnMgPSBuZXcgSGVhZGVycyhyZXF1ZXN0LmhlYWRlcnMpXHJcbiAgaWYgKHRva2VuKSB7XHJcbiAgICByZXF1ZXN0SGVhZGVycy5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7dG9rZW4udmFsdWV9YClcclxuICB9XHJcblxyXG4gIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCh7XHJcbiAgICByZXF1ZXN0OiB7XHJcbiAgICAgIGhlYWRlcnM6IHJlcXVlc3RIZWFkZXJzLFxyXG4gICAgfSxcclxuICB9KVxyXG59XHJcblxyXG4vLyDQo9C60LDQt9GL0LLQsNC10LwsINC00LvRjyDQutCw0LrQuNGFINC80LDRgNGI0YDRg9GC0L7QsiDQv9GA0LjQvNC10L3Rj9GC0YwgbWlkZGxld2FyZVxyXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4gIG1hdGNoZXI6IFtcclxuICAgIC8qXHJcbiAgICAgKiBNYXRjaCBhbGwgcmVxdWVzdCBwYXRocyBleGNlcHQgZm9yIHRoZSBvbmVzIHN0YXJ0aW5nIHdpdGg6XHJcbiAgICAgKiAtIGFwaSAoQVBJIHJvdXRlcylcclxuICAgICAqIC0gX25leHQvc3RhdGljIChzdGF0aWMgZmlsZXMpXHJcbiAgICAgKiAtIF9uZXh0L2ltYWdlIChpbWFnZSBvcHRpbWl6YXRpb24gZmlsZXMpXHJcbiAgICAgKiAtIGZhdmljb24uaWNvIChmYXZpY29uIGZpbGUpXHJcbiAgICAgKiAtIHB1YmxpYyBmb2xkZXJcclxuICAgICAqL1xyXG4gICAgJy8oKD8hYXBpfF9uZXh0L3N0YXRpY3xfbmV4dC9pbWFnZXxmYXZpY29uLmljb3xwdWJsaWMpLiopJyxcclxuICBdLFxyXG59ICJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJwdWJsaWNSb3V0ZXMiLCJtaWRkbGV3YXJlIiwicmVxdWVzdCIsInRva2VuIiwiY29va2llcyIsImdldCIsInBhdGhuYW1lIiwibmV4dFVybCIsImluY2x1ZGVzIiwibmV4dCIsInVybCIsIlVSTCIsInNlYXJjaFBhcmFtcyIsInNldCIsInJlZGlyZWN0IiwicmVxdWVzdEhlYWRlcnMiLCJIZWFkZXJzIiwiaGVhZGVycyIsInZhbHVlIiwiY29uZmlnIiwibWF0Y2hlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./middleware.ts\n");

/***/ })

});